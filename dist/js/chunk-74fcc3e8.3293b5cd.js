(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74fcc3e8"],{"5d57":function(e,t,a){"use strict";a("8bbf7")},"87eb":function(e,t,a){"use strict";a("e5be")},"8bbf7":function(e,t,a){},"9fff":function(e,t,a){},a711:function(e,t,a){"use strict";a("9fff")},acc2:function(e,t,a){"use strict";a("d8dd")},b69c:function(e,t,a){"use strict";a("d021")},c1f7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"font-size":"14px"}},[a("header",{staticClass:"head"},[a("Header")],1),a("div",{staticClass:"main"},[a("aside",[a("Aside")],1),a("main",[a("AppMain")],1)]),a("footer",[a("Footer")],1)])},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("el-menu",{attrs:{"default-openeds":["1","3"],router:"","active-text-color":"#ec4141"}},[a("el-menu-item",{attrs:{index:"/home"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("发现音乐")])]),a("el-submenu",{attrs:{index:"2",disabled:!e.isLogin}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-custom"}),e._v("创建的歌单")]),a("el-menu-item-group",e._l(e.userCreatePlayList,(function(t){return a("el-menu-item",{key:t.id,staticClass:"menuSongList",attrs:{index:"/home/songsList/"+t.id}},[e._v(e._s(t.name))])})),1)],2),a("el-submenu",{attrs:{index:"3",disabled:!e.isLogin}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-star-on"}),e._v("收藏的歌单")]),a("el-menu-item-group",e._l(e.userCollectionPlayList,(function(t){return a("el-menu-item",{key:t.id,staticStyle:{padding:"0 20px"},attrs:{index:"/home/songsList/"+t.id}},[e._v(e._s(t.name))])})),1)],2)],1)],1)},n=[],o=a("5530"),l=a("1da1"),c=(a("4de4"),a("96cf"),a("5880")),u=a("f17b"),m={data:function(){return{userPlayList:{playlist:[]}}},watch:{isLogin:function(e){e?this.initUserPlayList():this.userPlayList={}},userInfo:function(e){e?this.initUserPlayList():this.userPlayList={}}},methods:{initUserPlayList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isLogin){t.next=5;break}return t.next=3,Object(u["i"])(e.userInfo.userId);case 3:a=t.sent,200===a.status&&(e.userPlayList=a.data);case 5:case"end":return t.stop()}}),t)})))()}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["mapGetters"])("user",["isLogin"])),Object(c["mapState"])("user",["userInfo"])),{},{userCreatePlayList:function(){return this.userPlayList.playlist?this.userPlayList.playlist.filter((function(e){return!1===e.subscribed})):[]},userCollectionPlayList:function(){return this.userPlayList.playlist?this.userPlayList.playlist.filter((function(e){return!0===e.subscribed})):[""]}}),created:function(){this.initUserPlayList()}},d=m,p=(a("5d57"),a("2877")),f=Object(p["a"])(d,i,n,!1,null,"782145b7",null),h=f.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"song"},[a("Play")],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"menu"},[a("i",{class:e.isLoop?"el-icon-refresh":"el-icon-refresh-right",staticStyle:{"margin-right":"5px"},on:{click:function(t){return e.changeLoop()}}}),a("i",{staticClass:"el-icon-s-fold",on:{click:function(t){e.drawer=!e.drawer}}})])]),a("el-drawer",{attrs:{withHeader:!1,"show-close":!1,size:"30%",modal:!1,"append-to-body":!0,visible:e.drawer,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[a("el-card",{staticClass:"box-card",scopedSlots:e._u([{key:"header",fn:function(){return[a("h3",[e._v("正在播放")]),a("div",{staticClass:"info",staticStyle:{display:"flex"}},[a("div",[a("span",{staticStyle:{clolor:"#ccc"}},[e._v("共"+e._s(e.playList.length)+"首")])]),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",round:"",disabled:""}},[a("i",{staticClass:"el-icon-folder-add"}),e._v(" 收藏全部")]),a("el-button",{attrs:{type:"info",round:""},on:{click:function(t){return e.clearPlayList()}}},[e._v("清空列表")])],1)])]},proxy:!0}])},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"}),a("SongsTable",{attrs:{SongsList:e.playList,status:"list",btn:!1}})],1)],1)],1)},v=[],b=a("42e6"),w=a("6f29"),y={components:{Play:w["default"],SongsTable:b["a"]},data:function(){return{drawer:!1,direction:"rtl"}},methods:Object(o["a"])(Object(o["a"])({},Object(c["mapMutations"])("play",["changePlayId","clearPlayList","changeLoopState"])),{},{handleClose:function(e){e()},changeLoop:function(){this.changeLoopState(!this.isLoop),this.$message({message:this.isLoop?"切换为单曲循环":"切换为列表循环",type:"success"})}}),computed:Object(o["a"])({},Object(c["mapState"])("play",["playList","isLoop"])),name:"Footer"},x=y,k=(a("a711"),Object(p["a"])(x,g,v,!1,null,"74d64413",null)),L=k.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],style:{width:"200px",borderRadius:"30px"},attrs:{size:"small",placeholder:"搜索音乐"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("el-col",{staticStyle:{height:"60px"},attrs:{span:6,offset:0}}),a("el-col",{staticClass:"user",attrs:{span:6,offset:0}},[a("div",{staticClass:"user_avatar"},[a("el-avatar",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],attrs:{icon:"el-icon-user-solid"},nativeOn:{click:function(t){e.dialogFormVisible=!0}}}),a("el-avatar",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],attrs:{src:e.userInfo.avatarUrl?e.userInfo.avatarUrl+"?param=50y50":"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})],1),a("div",{staticClass:"user_info"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],staticStyle:{color:"#fff","font-size":"14px"},on:{click:function(t){e.dialogFormVisible=!0,e.activeName="email"}}},[e._v(" 未登录 ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"},{name:"popover",rawName:"v-popover:popoverUser",arg:"popoverUser"}]},[e._v(" "+e._s(e.userInfo.nickname)+" ")])])])],1),a("el-popover",{ref:"popover",attrs:{placement:"bottom-start",width:"280",title:0===e.searchlist.length?"热门搜索":"",trigger:"focus"}},[a("div",[0===e.searchlist.length?a("div",{staticClass:"hot_search"},[a("ul",{staticClass:"hot_name_wrap"},e._l(e.hotList,(function(t){return a("li",{key:t.first,staticClass:"hot_item",on:{click:function(a){return e.addhot(t.first)}}},[e._v(" "+e._s(t.first)+" ")])})),0)]):a("div",{staticClass:"hot_search"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"info",size:"mini",round:""},on:{click:e.delResult}},[e._v("清空搜索列表")]),a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(t){return e.$router.push("/home/searchList/"+e.input)}}},[e._v("详细列表 ")])],1),a("p",{staticClass:"hot_title"},[e._v("搜索结果")]),e._l(e.searchlist,(function(e){return a("div",{key:e.id},[a("el-divider"),a("SongItem",{attrs:{songName:e.name,author:e.artists[0].name,album:e.album.name,id:e.id}})],1)}))],2)])]),a("el-dialog",{attrs:{width:"300px","append-to-body":!0,title:"登录",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"手机帐号",name:"phone"}}),a("el-tab-pane",{attrs:{label:"邮箱帐号",name:"email"}}),a("el-tab-pane",{attrs:{label:"二维码",name:"Qrkey"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"Qrkey"===e.activeName,expression:"activeName === 'Qrkey'"}]},[a("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[a("canvas",{ref:"MyCanvas"})])],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"Qrkey"!==e.activeName,expression:"activeName !== 'Qrkey'"}],ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"phone"===e.activeName,expression:"activeName === 'phone'"}],attrs:{prop:"phone",label:"手机号"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"email"===e.activeName,expression:"activeName === 'email'"}],attrs:{prop:"email",label:"邮箱帐号"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"password",label:"密码"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v(e._s("Qrkey"===e.activeName?"确定":"登录"))])],1)],1),a("el-popover",{ref:"popoverUser",attrs:{placement:"bottom",width:"200",trigger:"click"}},[a("div",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-button",{attrs:{type:"danger",round:""},on:{click:e.loginOut}},[e._v("退出登录")])],1)],1)])],1)},j=[],O=(a("b0c0"),a("1925")),C=a("cf7e"),Q=a("d055"),R=a.n(Q),I=a("6821"),N=a.n(I),S=function(e,t,a){/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(t)?a():a(new Error("手机号码格式错误"))},$=function(e,t,a){/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(t)?a():a(new Error("邮箱格式错误"))},P={data:function(){return{QrKey:"",QrInfo:"",input:"",searchlist:[],timer:null,hotList:[],visible:!1,dialogFormVisible:!1,form:{phone:"",email:"",password:"",md5_password:""},activeName:"email",rules:{email:[{required:!0,trigger:"blur",validator:$}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},Qrtimer:null}},watch:{input:function(e){this.getSearch()},dialogFormVisible:function(e){e||(clearInterval(this.Qrtimer),this.Qrtimer=null)}},components:{SongItem:C["a"]},methods:Object(o["a"])(Object(o["a"])({},Object(c["mapMutations"])("user",["initUserCookie","initUserInfo","clearUserInfo"])),{},{getSearch:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.input.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(O["b"])(e.input,5);case 4:r=t.sent,s=r.data,console.log(s),e.searchlist=(null===(a=s.result)||void 0===a?void 0:a.songs)||[];case 8:case"end":return t.stop()}}),t)}))),500)},getHotKeys:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["a"])();case 2:a=t.sent,r=a.data.result.hots,e.hotList=r;case 5:case"end":return t.stop()}}),t)})))()},addhot:function(e){this.input=e},delResult:function(){this.input="",this.searchlist=[]},login:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("phone"!==e.activeName){t.next=9;break}return e.form.email=null,e.form.md5_password=N()(encodeURIComponent(e.form.password)),e.form.password=null,t.next=6,Object(u["d"])(e.form);case 6:a=t.sent,console.log(a),200===a.status&&(502===a.data.code?e.$message.warning(a.data.msg):(e.$message.success("登录成功"),e.dialogFormVisible=!1,e.initUserCookie(a.data.cookie),e.initUserInfo(a.data.profile)));case 9:if("email"!==e.activeName){t.next=18;break}return e.form.phone=null,e.form.md5_password=N()(encodeURIComponent(e.form.password)),e.form.password=null,t.next=15,Object(u["c"])(e.form);case 15:r=t.sent,200===r.status&&(502===r.data.code?e.$message.warning(r.data.msg):200===r.data.code&&(e.$message.success("登录成功"),e.initUserCookie(r.data.cookie),e.initUserInfo(r.data.profile),e.dialogFormVisible=!1)),console.log(r);case 18:case"end":return t.stop()}}),t)})))()},handleClick:function(e){"phone"===e.name?(clearInterval(this.Qrtimer),this.Qrtimer=null,this.rules={phone:[{required:!0,trigger:"blur",validator:S}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}):"email"===e.name?(clearInterval(this.Qrtimer),this.Qrtimer=null,this.rules={email:[{required:!0,trigger:"blur",validator:$}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}):"Qrkey"===e.name&&this.getQrKey()},loginstate:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["g"])();case 2:a=t.sent,console.log(a),200===a.data.data.code&&a.data.data.account&&e.initUserInfo(a.data.data.profile);case 5:case"end":return t.stop()}}),t)})))()},loginSignin:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["j"])();case 2:a=t.sent,console.log(a),200===a.code&&4===a.point&&e.$message.warning("请勿重复签到"),200===a.code&&3===a.point&&e.$message.success("签到成功");case 6:case"end":return t.stop()}}),t)})))()},loginOut:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["h"])();case 2:a=t.sent,console.log(a),200===a.data.code&&(e.clearUserInfo(),e.visible=!1);case 5:case"end":return t.stop()}}),t)})))()},getQrKey:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["b"])();case 2:a=t.sent,200===a.data.data.code&&(e.QrKey=a.data.data.unikey,console.log(e.QrKey)),e.getQrinfo();case 5:case"end":return t.stop()}}),t)})))()},getQrinfo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.QrKey){t.next=7;break}return t.next=3,Object(u["e"])(e.QrKey);case 3:a=t.sent,console.log(a),R.a.toCanvas(e.$refs.MyCanvas,a.data.data.qrurl),e.getQrState();case 7:case"end":return t.stop()}}),t)})))()},getQrState:function(){var e=this;console.log("开始轮训",this.Qrtimer),this.Qrtimer||(this.Qrtimer=setInterval(Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["a"])(e.QrKey);case 2:a=t.sent,console.log(a),400===a.data.code&&(e.$message.warning(a.data.message),clearInterval(e.Qrtimer),e.Qrtimer=null),802===a.data.code&&e.$message.success(a.data.message),803===a.data.code&&(e.$message.success(a.data.message),e.dialogFormVisible=!1,clearInterval(e.Qrtimer),e.Qrtimer=null,e.initUserCookie(a.data.cookie),e.loginstate()),800===a.data.code&&(e.$message.warning(a.data.message),e.getQrKey(),clearInterval(e.Qrtimer),e.Qrtimer=null);case 8:case"end":return t.stop()}}),t)}))),2e3))},getloginRefresh:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["f"])();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})))()}}),computed:Object(o["a"])(Object(o["a"])({},Object(c["mapState"])("user",["userInfo"])),Object(c["mapGetters"])("user",["isLogin"])),created:function(){this.getHotKeys(),this.loginstate()}},U=P,F=(a("acc2"),a("b69c"),Object(p["a"])(U,_,j,!1,null,"6def296a",null)),K=F.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"app-main"},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("router-view")],1)],1)},q=[],E={},z=E,M=Object(p["a"])(z,V,q,!1,null,"b34624d0",null),H=M.exports,A={components:{Aside:h,Header:K,AppMain:H,Footer:L}},T=A,G=(a("87eb"),Object(p["a"])(T,r,s,!1,null,"4ace57a9",null));t["default"]=G.exports},d021:function(e,t,a){},d8dd:function(e,t,a){},e5be:function(e,t,a){}}]);
//# sourceMappingURL=chunk-74fcc3e8.3293b5cd.js.map