(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c5c55662"],{"16ac":function(e,t,s){"use strict";s("9542")},1941:function(e,t,s){"use strict";s("31e4")},"1fa1":function(e,t,s){e.exports=s.p+"img/disc.a42bb8f4.png"},"2ce2":function(e,t,s){},"31e4":function(e,t,s){},"4b2e":function(e,t,s){},7706:function(e,t,s){},9320:function(e,t,s){"use strict";s("2ce2")},9542:function(e,t,s){},a117:function(e,t,s){"use strict";s("af3f")},af3f:function(e,t,s){},baf1:function(e,t,s){e.exports=s.p+"img/needle.72039ea9.png"},bb51:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-container",{staticStyle:{height:"100vh"}},[t("Header"),t("el-container",{staticStyle:{padding:"60px 0px",overflow:"hidden"}},[t("Aside"),t("el-main",{staticClass:"view",staticStyle:{padding:"5px 20px"}},[t("router-view",{staticClass:"main"})],1)],1),t("Footer"),t("MusicDetailCard")],1)],1)},i=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"musicDetailCardContainer",class:e.playDetail?"":"hide"},[t("div",{staticClass:"closeCard",on:{click:e.closeCard}},[t("i",{staticClass:"el-icon-arrow-down"})]),t("div",{staticClass:"Container"},[t("div",{staticClass:"title"},[t("h2",[e._v(e._s(e.currentPlay.name))]),e.currentPlay.ar&&e.currentPlay.ar.length?t("div",{staticClass:"singer"},[e._v(e._s(e.currentPlay.ar[0].name))]):e._e()]),t("div",{staticClass:"songDetail"},[t("div",{staticClass:"songCover"},[t("div",{staticClass:"needle",class:e.isPlaying?"needleRotate":""},[t("img",{attrs:{src:s("baf1"),alt:""}})]),t("div",{staticClass:"cover",class:e.isPlaying?"discAnimation":""},[t("img",{staticClass:"coverborder",attrs:{src:s("1fa1"),alt:""}}),t("img",{staticClass:"coverPic",attrs:{src:e.coverUrl?""+e.coverUrl:"~@/assets/img/cover.jpg",alt:""}})])]),t("LyricsScroll")],1)])])},o=[],l=s("2f62"),n={name:"MusicDetailCard",data(){return{}},methods:{...Object(l["d"])("play",["changePlayDetailState"]),closeCard(){this.changePlayDetailState(!1)}},computed:{...Object(l["c"])("play",["coverUrl"]),...Object(l["e"])("play",["playDetail","currentPlay","isPlaying"])}},c=n,d=(s("e868"),s("2877")),u=Object(d["a"])(c,r,o,!1,null,"89f492a8",null),m=u.exports,p=(s("14d9"),function(){var e=this,t=e._self._c;return t("el-header",{staticClass:"head"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12,offset:0}},[t("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],style:{width:"200px",borderRadius:"30px"},attrs:{size:"small",placeholder:"搜索音乐"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),t("el-col",{staticStyle:{height:"60px"},attrs:{span:6,offset:0}}),t("el-col",{staticClass:"user",attrs:{span:6,offset:0}},[t("div",{staticClass:"user_avatar"},[t("el-avatar",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],attrs:{icon:"el-icon-user-solid"},nativeOn:{click:function(t){e.dialogFormVisible=!0}}}),t("el-avatar",{directives:[{name:"show",rawName:"v-show",value:e.isLogin&&e.userInfo,expression:"isLogin&&userInfo"}],attrs:{src:e.userInfo?e.userInfo.avatarUrl+"?param=50y50":"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})],1),t("div",{staticClass:"user_info"},[t("p",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],staticStyle:{color:"#fff","font-size":"14px"},on:{click:function(t){e.dialogFormVisible=!0,e.activeName="email"}}},[e._v(" 未登录 ")]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"},{name:"popover",rawName:"v-popover:popoverUser",arg:"popoverUser"}]},[e._v(" "+e._s(e.userInfo.nickname?e.userInfo.nickname:"未获取到登录信息")+" ")])])])],1),t("el-popover",{ref:"popover",attrs:{placement:"bottom-start",width:"280",title:0===e.searchlist.length?"热门搜索":"",trigger:"focus"}},[t("div",[0===e.searchlist.length?t("div",{staticClass:"hot_search"},[t("ul",{staticClass:"hot_name_wrap"},e._l(e.hotList,(function(s){return t("li",{key:s.first,staticClass:"hot_item",on:{click:function(t){return e.addhot(s.first)}}},[e._v(" "+e._s(s.first)+" ")])})),0)]):t("div",{staticClass:"hot_search"},[t("div",{staticClass:"btn"},[t("el-button",{attrs:{type:"info",size:"mini",round:""},on:{click:e.delResult}},[e._v("清空搜索列表")]),t("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(t){return e.$router.push("/home/searchList/"+e.input)}}},[e._v("详细列表 ")])],1),t("p",{staticClass:"hot_title"},[e._v("搜索结果")]),e._l(e.searchlist,(function(e){return t("div",{key:e.id},[t("el-divider"),t("SongItem",{attrs:{songName:e.name,author:e.artists[0].name,album:e.album.name,id:e.id}})],1)}))],2)])]),t("el-dialog",{attrs:{width:"300px","append-to-body":!0,title:"登录",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"手机帐号",name:"phone"}}),t("el-tab-pane",{attrs:{label:"邮箱帐号",name:"email"}}),t("el-tab-pane",{attrs:{label:"二维码",name:"Qrkey"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"Qrkey"===e.activeName,expression:"activeName === 'Qrkey'"}]},[t("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[t("canvas",{ref:"MyCanvas"})])],1),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"Qrkey"!==e.activeName,expression:"activeName !== 'Qrkey'"}],ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"phone"===e.activeName,expression:"activeName === 'phone'"}],attrs:{prop:"phone",label:"手机号"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"email"===e.activeName,expression:"activeName === 'email'"}],attrs:{prop:"email",label:"邮箱帐号"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",{attrs:{prop:"password",label:"密码"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v(e._s("Qrkey"===e.activeName?"确定":"登录"))])],1)],1),t("el-popover",{ref:"popoverUser",attrs:{placement:"bottom",width:"200",trigger:"click"}},[t("div",[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-button",{attrs:{type:"danger",round:""},on:{click:e.loginOut}},[e._v("退出登录")])],1)],1)])],1)}),h=[],f=(s("d9e2"),s("f17b")),g=s("1925"),v=s("cf7e"),y=s("d055"),b=s.n(y),w=s("6821"),C=s.n(w);const _=(e,t,s)=>{/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(t)?s():s(new Error("手机号码格式错误"))},x=(e,t,s)=>{/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(t)?s():s(new Error("邮箱格式错误"))};var L={data(){return{QrKey:"",QrInfo:"",input:"",searchlist:[],timer:null,hotList:[],visible:!1,dialogFormVisible:!1,form:{phone:"",email:"",password:"",md5_password:""},activeName:"email",rules:{email:[{required:!0,trigger:"blur",validator:x}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},Qrtimer:null}},watch:{input(e){this.getSearch()},dialogFormVisible(e){e||(clearInterval(this.Qrtimer),this.Qrtimer=null)}},components:{SongItem:v["a"]},methods:{...Object(l["d"])("user",["initUserCookie","initUserInfo","clearUserInfo"]),getSearch(){clearTimeout(this.timer),this.timer=setTimeout(async()=>{var e;if(0===this.input.length)return;const{data:t}=await Object(g["b"])(this.input,5);console.log(t),this.searchlist=(null===(e=t.result)||void 0===e?void 0:e.songs)||[]},500)},async getHotKeys(){const{data:{result:{hots:e}}}=await Object(g["a"])();this.hotList=e},addhot(e){this.input=e},delResult(){this.input="",this.searchlist=[]},async login(){if("phone"===this.activeName){this.form.email=null,this.form.md5_password=C()(encodeURIComponent(this.form.password)),this.form.password=null;const e=await Object(f["f"])(this.form);console.log(e),200===e.status&&(502===e.data.code?this.$message.warning(e.data.msg):(this.$message.success("登录成功"),this.dialogFormVisible=!1,this.initUserCookie(e.data.cookie),this.initUserInfo(e.data.profile)))}if("email"===this.activeName){this.form.phone=null,this.form.md5_password=C()(encodeURIComponent(this.form.password)),this.form.password=null;const e=await Object(f["e"])(this.form);200===e.status&&(502===e.data.code?this.$message.warning(e.data.msg):200===e.data.code&&(this.$message.success("登录成功"),this.initUserCookie(e.data.cookie),this.initUserInfo(e.data.profile),this.dialogFormVisible=!1)),console.log(e)}},handleClick(e){"phone"===e.name?(clearInterval(this.Qrtimer),this.Qrtimer=null,this.rules={phone:[{required:!0,trigger:"blur",validator:_}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}):"email"===e.name?(clearInterval(this.Qrtimer),this.Qrtimer=null,this.rules={email:[{required:!0,trigger:"blur",validator:x}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}):"Qrkey"===e.name&&this.getQrKey()},async loginstate(){const e=await Object(f["i"])();console.log(e),200===e.data.data.code&&e.data.data.account&&this.initUserInfo(e.data.data.profile)},async loginSignin(){const e=await Object(f["l"])();console.log(e),200===e.code&&4===e.point&&this.$message.warning("请勿重复签到"),200===e.code&&3===e.point&&this.$message.success("签到成功")},async loginOut(){const e=await Object(f["j"])();console.log(e),200===e.data.code&&(this.clearUserInfo(),this.visible=!1)},async getQrKey(){const e=await Object(f["d"])();200===e.data.data.code&&(this.QrKey=e.data.data.unikey,console.log(this.QrKey)),this.getQrinfo()},async getQrinfo(){if(this.QrKey){const e=await Object(f["g"])(this.QrKey);console.log(e),b.a.toCanvas(this.$refs.MyCanvas,e.data.data.qrurl),this.getQrState()}},getQrState(){console.log("开始轮训",this.Qrtimer),this.Qrtimer||(this.Qrtimer=setInterval(async()=>{const e=await Object(f["a"])(this.QrKey);console.log(e),400===e.data.code&&(this.$message.warning(e.data.message),clearInterval(this.Qrtimer),this.Qrtimer=null),802===e.data.code&&this.$message.success(e.data.message),803===e.data.code&&(this.$message.success(e.data.message),this.dialogFormVisible=!1,clearInterval(this.Qrtimer),this.Qrtimer=null,this.initUserCookie(e.data.cookie),this.loginstate()),800===e.data.code&&(this.$message.warning(e.data.message),this.getQrKey(),clearInterval(this.Qrtimer),this.Qrtimer=null)},2e3))},async getloginRefresh(){const e=await Object(f["h"])();console.log(e)}},computed:{...Object(l["e"])("user",["userInfo"]),...Object(l["c"])("user",["isLogin"])},created(){this.getHotKeys(),this.loginstate()}},k=L,I=(s("9320"),s("cb96"),Object(d["a"])(k,p,h,!1,null,"e169a0a8",null)),Q=I.exports,j=function(){var e=this,t=e._self._c;return t("el-aside",{staticClass:"aside",staticStyle:{width:"250px","font-size":"14px"}},[t("el-menu",{attrs:{"default-openeds":["1","3"],router:"","active-text-color":"#ec4141"}},[t("el-menu-item",{attrs:{index:"/home"}},[t("i",{staticClass:"el-icon-menu"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("发现音乐")])]),t("el-submenu",{attrs:{index:"2",disabled:!e.isLogin}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-s-custom"}),e._v("创建的歌单")]),e.userCreatePlayList?t("el-menu-item-group",e._l(e.userCreatePlayList,(function(s){return t("el-menu-item",{key:s.id,attrs:{index:"/home/songsList/"+s.id}},[e._v(e._s(s.name))])})),1):e._e()],2),t("el-submenu",{attrs:{index:"3",disabled:!e.isLogin}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-star-on"}),e._v("收藏的歌单")]),e.userCollectionPlayList?t("el-menu-item-group",e._l(e.userCollectionPlayList,(function(s){return t("el-menu-item",{key:s.id,attrs:{index:"/home/songsList/"+s.id}},[e._v(e._s(s.name))])})),1):e._e()],2)],1)],1)},P=[],O={data(){return{}},watch:{isLogin(e){e?this.initUserPlayList(this.userInfo.userId):this.changeUserPlayList([])},userInfo(e){e?this.initUserPlayList(this.userInfo.userId):this.changeUserPlayList([])}},methods:{...Object(l["b"])("user",["initUserPlayList","getUserLoveSong"]),...Object(l["d"])("user",["changeUserPlayList"])},computed:{...Object(l["c"])("user",["isLogin","userCreatePlayList","userCollectionPlayList"]),...Object(l["e"])("user",["userInfo"])},created(){this.isLogin&&(this.initUserPlayList(this.userInfo.userId),this.getUserLoveSong(this.userInfo.userId))}},N=O,S=(s("a117"),s("1941"),Object(d["a"])(N,j,P,!1,null,"f1645d10",null)),U=S.exports,$=function(){var e=this,t=e._self._c;return t("el-footer",{staticClass:"footer",staticStyle:{"z-index":"1001",width:"100vw",padding:"0"}},[t("el-row",[t("el-col",{directives:[{name:"show",rawName:"v-show",value:!e.playDetail,expression:"!playDetail"}],attrs:{span:5}},[t("Play")],1),t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.playDetail,expression:"playDetail"}],attrs:{span:5}},[t("PlayInfo")],1),e.playDetail?t("el-col",{staticStyle:{display:"flex","justify-content":"center"},attrs:{span:15}},[t("Playcontrol")],1):t("el-col",{attrs:{span:15}},[t("LyricFooter")],1),t("el-col",{attrs:{span:4}},[t("div",{staticClass:"menu"},[t("IsLike",{staticStyle:{"margin-right":"5px"},attrs:{state:!0,id:e.playId}}),t("IsLoop"),t("i",{staticClass:"el-icon-s-fold",on:{click:function(t){e.drawer=!e.drawer}}})],1)])],1),t("el-drawer",{staticStyle:{"padding-bottom":"60px"},attrs:{withHeader:!1,"show-close":!1,size:"40%",modal:!1,"append-to-body":!0,visible:e.drawer,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[t("el-card",{staticClass:"box-card",scopedSlots:e._u([{key:"header",fn:function(){return[t("h3",[e._v("正在播放")]),t("div",{staticClass:"info",staticStyle:{display:"flex"}},[t("div",[t("span",{staticStyle:{clolor:"#ccc"}},[e._v("共"+e._s(e.playList.length)+"首")])]),t("div",{staticClass:"btn"},[t("el-button",{attrs:{type:"primary",round:"",disabled:""}},[t("i",{staticClass:"el-icon-folder-add"}),e._v(" 收藏全部")]),t("el-button",{attrs:{type:"info",round:""},on:{click:function(t){return e.clearPlayList1()}}},[e._v("清空列表")])],1)])]},proxy:!0}])},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"}),t("SongsTable",{attrs:{SongsList:e.playList,status:"list",btn:!1}})],1)],1)],1)},D=[],F=s("42e6"),K=s("6f29"),V={components:{Play:K["default"],SongsTable:F["a"]},data(){return{drawer:!1,direction:"rtl"}},methods:{...Object(l["d"])("play",["changePlayId","clearPlayList"]),clearPlayList1(){this.$confirm("确认清空播放列表吗？","提示").then(()=>{this.clearPlayList()}).catch(console.log)},handleClose(e){e()}},computed:{...Object(l["e"])("play",["playList","playId","playDetail"])},name:"Footer"},q=V,z=(s("16ac"),Object(d["a"])(q,$,D,!1,null,"53c3507e",null)),R=z.exports,H={components:{Header:Q,Aside:U,Footer:R,MusicDetailCard:m},data(){return{view:"songs",full:!1}}},M=H,T=(s("e6bb"),Object(d["a"])(M,a,i,!1,null,null,null));t["default"]=T.exports},cb96:function(e,t,s){"use strict";s("4b2e")},e6bb:function(e,t,s){"use strict";s("7706")},e868:function(e,t,s){"use strict";s("f9bd")},f9bd:function(e,t,s){}}]);
//# sourceMappingURL=chunk-c5c55662.0b8eeafa.js.map