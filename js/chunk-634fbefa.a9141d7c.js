(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-634fbefa"],{"1fa1":function(e,t,a){e.exports=a.p+"img/disc.a42bb8f4.png"},"228f":function(e,t,a){"use strict";a("3602")},3004:function(e,t,a){"use strict";a("b70e")},3602:function(e,t,a){},"6fb7":function(e,t,a){},8337:function(e,t,a){"use strict";a("a3f2")},"8d91":function(e,t,a){},"91a0":function(e,t,a){"use strict";a("6fb7")},a3f2:function(e,t,a){},b70e:function(e,t,a){},baf1:function(e,t,a){e.exports=a.p+"img/needle.72039ea9.png"},bb03:function(e,t,a){"use strict";a("e27c")},bb51:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",{staticStyle:{height:"100vh"}},[a("Header"),a("el-container",{staticStyle:{padding:"60px 0px",overflow:"hidden"}},[a("Aside"),a("el-main",{staticClass:"view",staticStyle:{padding:"5px 20px"}},[a("router-view",{staticClass:"main"})],1)],1),a("Footer"),a("MusicDetailCard")],1)],1)},r=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"musicDetailCardContainer",class:e.playDetail?"":"hide"},[s("div",{staticClass:"closeCard",on:{click:e.closeCard}},[s("i",{staticClass:"el-icon-arrow-down"})]),s("div",{staticClass:"Container"},[s("div",{staticClass:"title"},[s("h2",[e._v(e._s(e.currentPlay.name))]),s("div",{staticClass:"singer"},[e._v(e._s(e.currentPlay.ar[0].name))])]),s("div",{staticClass:"songDetail"},[s("div",{staticClass:"songCover"},[s("div",{staticClass:"needle",class:e.isPlaying?"needleRotate":""},[s("img",{attrs:{src:a("baf1"),alt:""}})]),s("div",{staticClass:"cover",class:e.isPlaying?"discAnimation":""},[s("img",{staticClass:"coverborder",attrs:{src:a("1fa1"),alt:""}}),s("img",{staticClass:"coverPic",attrs:{src:e.coverUrl?""+e.coverUrl:"~@/assets/img/cover.jpg",alt:""}})])]),s("LyricsScroll")],1)])])},n=[],o=a("5530"),l=a("5880"),c={name:"MusicDetailCard",data:function(){return{}},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapMutations"])("play",["changePlayDetailState"])),{},{closeCard:function(){this.changePlayDetailState(!1)}}),computed:Object(o["a"])(Object(o["a"])({},Object(l["mapGetters"])("play",["coverUrl"])),Object(l["mapState"])("play",["playDetail","currentPlay","isPlaying"]))},u=c,d=(a("91a0"),a("2877")),m=Object(d["a"])(u,i,n,!1,null,"e7d866c6",null),p=m.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-header",{staticClass:"head"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:0}},[a("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],style:{width:"200px",borderRadius:"30px"},attrs:{size:"small",placeholder:"搜索音乐"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("el-col",{staticStyle:{height:"60px"},attrs:{span:6,offset:0}}),a("el-col",{staticClass:"user",attrs:{span:6,offset:0}},[a("div",{staticClass:"user_avatar"},[a("el-avatar",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],attrs:{icon:"el-icon-user-solid"},nativeOn:{click:function(t){e.dialogFormVisible=!0}}}),a("el-avatar",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],attrs:{src:e.userInfo.avatarUrl?e.userInfo.avatarUrl+"?param=50y50":"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})],1),a("div",{staticClass:"user_info"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],staticStyle:{color:"#fff","font-size":"14px"},on:{click:function(t){e.dialogFormVisible=!0,e.activeName="email"}}},[e._v(" 未登录 ")]),a("p",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"},{name:"popover",rawName:"v-popover:popoverUser",arg:"popoverUser"}]},[e._v(" "+e._s(e.userInfo.nickname?e.userInfo.nickname:"未获取到登录信息")+" ")])])])],1),a("el-popover",{ref:"popover",attrs:{placement:"bottom-start",width:"280",title:0===e.searchlist.length?"热门搜索":"",trigger:"focus"}},[a("div",[0===e.searchlist.length?a("div",{staticClass:"hot_search"},[a("ul",{staticClass:"hot_name_wrap"},e._l(e.hotList,(function(t){return a("li",{key:t.first,staticClass:"hot_item",on:{click:function(a){return e.addhot(t.first)}}},[e._v(" "+e._s(t.first)+" ")])})),0)]):a("div",{staticClass:"hot_search"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"info",size:"mini",round:""},on:{click:e.delResult}},[e._v("清空搜索列表")]),a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(t){return e.$router.push("/home/searchList/"+e.input)}}},[e._v("详细列表 ")])],1),a("p",{staticClass:"hot_title"},[e._v("搜索结果")]),e._l(e.searchlist,(function(e){return a("div",{key:e.id},[a("el-divider"),a("SongItem",{attrs:{songName:e.name,author:e.artists[0].name,album:e.album.name,id:e.id}})],1)}))],2)])]),a("el-dialog",{attrs:{width:"300px","append-to-body":!0,title:"登录",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"手机帐号",name:"phone"}}),a("el-tab-pane",{attrs:{label:"邮箱帐号",name:"email"}}),a("el-tab-pane",{attrs:{label:"二维码",name:"Qrkey"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"Qrkey"===e.activeName,expression:"activeName === 'Qrkey'"}]},[a("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[a("canvas",{ref:"MyCanvas"})])],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"Qrkey"!==e.activeName,expression:"activeName !== 'Qrkey'"}],ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"phone"===e.activeName,expression:"activeName === 'phone'"}],attrs:{prop:"phone",label:"手机号"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"email"===e.activeName,expression:"activeName === 'email'"}],attrs:{prop:"email",label:"邮箱帐号"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"password",label:"密码"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v(e._s("Qrkey"===e.activeName?"确定":"登录"))])],1)],1),a("el-popover",{ref:"popoverUser",attrs:{placement:"bottom",width:"200",trigger:"click"}},[a("div",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-button",{attrs:{type:"danger",round:""},on:{click:e.loginOut}},[e._v("退出登录")])],1)],1)])],1)},v=[],g=a("1da1"),h=(a("b0c0"),a("96cf"),a("f17b")),b=a("1925"),w=a("cf7e"),y=a("d055"),x=a.n(y),C=a("6821"),k=a.n(C),j=function(e,t,a){/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(t)?a():a(new Error("手机号码格式错误"))},O=function(e,t,a){/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(t)?a():a(new Error("邮箱格式错误"))},_={data:function(){return{QrKey:"",QrInfo:"",input:"",searchlist:[],timer:null,hotList:[],visible:!1,dialogFormVisible:!1,form:{phone:"",email:"",password:"",md5_password:""},activeName:"email",rules:{email:[{required:!0,trigger:"blur",validator:O}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},Qrtimer:null}},watch:{input:function(e){this.getSearch()},dialogFormVisible:function(e){e||(clearInterval(this.Qrtimer),this.Qrtimer=null)}},components:{SongItem:w["a"]},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapMutations"])("user",["initUserCookie","initUserInfo","clearUserInfo"])),{},{getSearch:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(Object(g["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.input.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(b["b"])(e.input,5);case 4:s=t.sent,r=s.data,console.log(r),e.searchlist=(null===(a=r.result)||void 0===a?void 0:a.songs)||[];case 8:case"end":return t.stop()}}),t)}))),500)},getHotKeys:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(b["a"])();case 2:a=t.sent,s=a.data.result.hots,e.hotList=s;case 5:case"end":return t.stop()}}),t)})))()},addhot:function(e){this.input=e},delResult:function(){this.input="",this.searchlist=[]},login:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("phone"!==e.activeName){t.next=9;break}return e.form.email=null,e.form.md5_password=k()(encodeURIComponent(e.form.password)),e.form.password=null,t.next=6,Object(h["f"])(e.form);case 6:a=t.sent,console.log(a),200===a.status&&(502===a.data.code?e.$message.warning(a.data.msg):(e.$message.success("登录成功"),e.dialogFormVisible=!1,e.initUserCookie(a.data.cookie),e.initUserInfo(a.data.profile)));case 9:if("email"!==e.activeName){t.next=18;break}return e.form.phone=null,e.form.md5_password=k()(encodeURIComponent(e.form.password)),e.form.password=null,t.next=15,Object(h["e"])(e.form);case 15:s=t.sent,200===s.status&&(502===s.data.code?e.$message.warning(s.data.msg):200===s.data.code&&(e.$message.success("登录成功"),e.initUserCookie(s.data.cookie),e.initUserInfo(s.data.profile),e.dialogFormVisible=!1)),console.log(s);case 18:case"end":return t.stop()}}),t)})))()},handleClick:function(e){"phone"===e.name?(clearInterval(this.Qrtimer),this.Qrtimer=null,this.rules={phone:[{required:!0,trigger:"blur",validator:j}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}):"email"===e.name?(clearInterval(this.Qrtimer),this.Qrtimer=null,this.rules={email:[{required:!0,trigger:"blur",validator:O}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}):"Qrkey"===e.name&&this.getQrKey()},loginstate:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["i"])();case 2:a=t.sent,console.log(a),200===a.data.data.code&&a.data.data.account&&e.initUserInfo(a.data.data.profile);case 5:case"end":return t.stop()}}),t)})))()},loginSignin:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["l"])();case 2:a=t.sent,console.log(a),200===a.code&&4===a.point&&e.$message.warning("请勿重复签到"),200===a.code&&3===a.point&&e.$message.success("签到成功");case 6:case"end":return t.stop()}}),t)})))()},loginOut:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["j"])();case 2:a=t.sent,console.log(a),200===a.data.code&&(e.clearUserInfo(),e.visible=!1);case 5:case"end":return t.stop()}}),t)})))()},getQrKey:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["d"])();case 2:a=t.sent,200===a.data.data.code&&(e.QrKey=a.data.data.unikey,console.log(e.QrKey)),e.getQrinfo();case 5:case"end":return t.stop()}}),t)})))()},getQrinfo:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.QrKey){t.next=7;break}return t.next=3,Object(h["g"])(e.QrKey);case 3:a=t.sent,console.log(a),x.a.toCanvas(e.$refs.MyCanvas,a.data.data.qrurl),e.getQrState();case 7:case"end":return t.stop()}}),t)})))()},getQrState:function(){var e=this;console.log("开始轮训",this.Qrtimer),this.Qrtimer||(this.Qrtimer=setInterval(Object(g["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["a"])(e.QrKey);case 2:a=t.sent,console.log(a),400===a.data.code&&(e.$message.warning(a.data.message),clearInterval(e.Qrtimer),e.Qrtimer=null),802===a.data.code&&e.$message.success(a.data.message),803===a.data.code&&(e.$message.success(a.data.message),e.dialogFormVisible=!1,clearInterval(e.Qrtimer),e.Qrtimer=null,e.initUserCookie(a.data.cookie),e.loginstate()),800===a.data.code&&(e.$message.warning(a.data.message),e.getQrKey(),clearInterval(e.Qrtimer),e.Qrtimer=null);case 8:case"end":return t.stop()}}),t)}))),2e3))},getloginRefresh:function(){return Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["h"])();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})))()}}),computed:Object(o["a"])(Object(o["a"])({},Object(l["mapState"])("user",["userInfo"])),Object(l["mapGetters"])("user",["isLogin"])),created:function(){this.getHotKeys(),this.loginstate()}},L=_,I=(a("3004"),a("228f"),Object(d["a"])(L,f,v,!1,null,"338c70aa",null)),Q=I.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-aside",{staticClass:"aside",staticStyle:{width:"250px","font-size":"14px"}},[a("el-menu",{attrs:{"default-openeds":["1","3"],router:"","active-text-color":"#ec4141"}},[a("el-menu-item",{attrs:{index:"/home"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("发现音乐")])]),a("el-submenu",{attrs:{index:"2",disabled:!e.isLogin}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-s-custom"}),e._v("创建的歌单")]),e.userCreatePlayList?a("el-menu-item-group",e._l(e.userCreatePlayList,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:"/home/songsList/"+t.id}},[e._v(e._s(t.name))])})),1):e._e()],2),a("el-submenu",{attrs:{index:"3",disabled:!e.isLogin}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-star-on"}),e._v("收藏的歌单")]),e.userCollectionPlayList?a("el-menu-item-group",e._l(e.userCollectionPlayList,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:"/home/songsList/"+t.id}},[e._v(e._s(t.name))])})),1):e._e()],2)],1)],1)},P=[],N={data:function(){return{}},watch:{isLogin:function(e){e?this.initUserPlayList(this.userInfo.userId):this.changeUserPlayList([])},userInfo:function(e){e?this.initUserPlayList(this.userInfo.userId):this.changeUserPlayList([])}},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapActions"])("user",["initUserPlayList","getUserLoveSong"])),Object(l["mapMutations"])("user",["changeUserPlayList"])),computed:Object(o["a"])(Object(o["a"])({},Object(l["mapGetters"])("user",["isLogin","userCreatePlayList","userCollectionPlayList"])),Object(l["mapState"])("user",["userInfo"])),created:function(){this.isLogin&&(this.initUserPlayList(this.userInfo.userId),this.getUserLoveSong(this.userInfo.userId))}},U=N,R=(a("da44"),a("8337"),Object(d["a"])(U,S,P,!1,null,"f1645d10",null)),$=R.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-footer",{staticClass:"footer",staticStyle:{"z-index":"1001",width:"100vw",padding:"0"}},[a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:!e.playDetail,expression:"!playDetail"}],attrs:{span:5}},[a("Play")],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.playDetail,expression:"playDetail"}],attrs:{span:5}},[a("PlayInfo")],1),e.playDetail?a("el-col",{staticStyle:{display:"flex","justify-content":"center"},attrs:{span:15}},[a("Playcontrol")],1):a("el-col",{attrs:{span:15}},[a("LyricFooter")],1),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"menu"},[a("IsLike",{staticStyle:{"margin-right":"5px"},attrs:{state:!0,id:e.playId}}),a("IsLoop"),a("i",{staticClass:"el-icon-s-fold",on:{click:function(t){e.drawer=!e.drawer}}})],1)])],1),a("el-drawer",{staticStyle:{"padding-bottom":"60px"},attrs:{withHeader:!1,"show-close":!1,size:"40%",modal:!1,"append-to-body":!0,visible:e.drawer,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[a("el-card",{staticClass:"box-card",scopedSlots:e._u([{key:"header",fn:function(){return[a("h3",[e._v("正在播放")]),a("div",{staticClass:"info",staticStyle:{display:"flex"}},[a("div",[a("span",{staticStyle:{clolor:"#ccc"}},[e._v("共"+e._s(e.playList.length)+"首")])]),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",round:"",disabled:""}},[a("i",{staticClass:"el-icon-folder-add"}),e._v(" 收藏全部")]),a("el-button",{attrs:{type:"info",round:""},on:{click:function(t){return e.clearPlayList1()}}},[e._v("清空列表")])],1)])]},proxy:!0}])},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"}),a("SongsTable",{attrs:{SongsList:e.playList,status:"list",btn:!1}})],1)],1)],1)},F=[],K=a("42e6"),V=a("6f29"),M={components:{Play:V["default"],SongsTable:K["a"]},data:function(){return{drawer:!1,direction:"rtl"}},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapMutations"])("play",["changePlayId","clearPlayList"])),{},{clearPlayList1:function(){var e=this;this.$confirm("确认清空播放列表吗？","提示").then((function(){e.clearPlayList()})).catch(console.log)},handleClose:function(e){e()}}),computed:Object(o["a"])({},Object(l["mapState"])("play",["playList","playId","playDetail"])),name:"Footer"},q=M,z=(a("bb03"),Object(d["a"])(q,D,F,!1,null,"53c3507e",null)),E=z.exports,H={components:{Header:Q,Aside:$,Footer:E,MusicDetailCard:p},data:function(){return{view:"songs",full:!1}}},A=H,T=(a("de16"),Object(d["a"])(A,s,r,!1,null,null,null));t["default"]=T.exports},da44:function(e,t,a){"use strict";a("ddc1")},ddc1:function(e,t,a){},de16:function(e,t,a){"use strict";a("8d91")},e27c:function(e,t,a){}}]);
//# sourceMappingURL=chunk-634fbefa.a9141d7c.js.map