name: Deploy GitHub Pages

# è§¦å‘æ¡ä»¶ï¼šåœ¨ push åˆ° master åˆ†æ”¯å
on:
   push:
      branches:
         - master

# ä»»åŠ¡
jobs:
   build-and-deploy:
      # æœåŠ¡å™¨ç¯å¢ƒï¼šæœ€æ–°ç‰ˆ Ubuntu
      runs-on: ubuntu-latest
      name: Deploy vue_muisc
      steps:
         # æ‹‰å–ä»£ç 
         - name: CheckoutğŸ›ï¸
           uses: actions/checkout@v3
           with:
              persist-credentials: false
         - name: è®¾ç½® Node.js ç‰ˆæœ¬
           uses: actions/setup-node@v4
           with:
              node-version: '16'
         # ç”Ÿæˆé™æ€æ–‡ä»¶ï¼ˆexport NODE_OPTIONS=--max_old_space_size=4096  è§£å†³JavaScript heap out of memoryé—®é¢˜ï¼‰
         - name: set npm
           run: npm config set registry https://registry.npmmirror.com
         - name: install npm
           run: npm install 
         - name: export
           run: export NODE_OPTIONS=--max_old_space_size=4096
         - name: Build ğŸ“
           run:  npm run build

         # éƒ¨ç½²åˆ° GitHub Pages
         - name: DeployğŸš€
           uses: JamesIves/github-pages-deploy-action@v4
           with:
              ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
              BRANCH: gh-pages
              FOLDER: ./dist # é™æ€èµ„æºç›®å½•